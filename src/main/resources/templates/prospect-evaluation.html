<!DOCTYPE html>
<html xmlns="w3.org/1999/xhtml" xmlns:th="thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Registro de prospecto</title>
	<link th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
</head>

<body style="background-image: url('/img/postulacion.png');">
	<div class="container" style="padding-top: 5%;">
		<div class="row" style="width: 100%;">
			<div class="col-lg-7 mx-auto" style="width: 100%;">
				<div class="card mt-2 mx-auto p-4 bg-light">
					<div class="card-body bg-light">
						<h1 class="text-center">Busqueda de prospecto</h1>
					</div>
					<form id="contact-form" method="GET" role="form" th:action="@{/prospect-details/specificProspect}" th:object="${prospect}">
						<select class="form-select" th:field="*{id_evaluation}">
							<option th:each="prospect: ${prospects}" th:value="${prospect.id}"
								th:text="${prospect.name +' '+ prospect.lastname}">
							</option>
						</select>
						<button type="submit" class="btn btn-primary" style="width: 40%;margin-left: 35%;margin-top: 25px;">Buscar</button>
					</form>
					<hr />
					<div class="card-body bg-light">
						<h1 class="text-center">Datos del prospecto</h1>
					</div>
					<form id="contact-form" method="POST" role="form" th:action="@{/evaluateProspect}"
						th:object="${prospect}">
						<div class="row">
							<div class="form-group"> <label for="name">Identificador</label>
								<input disabled th:field="*{id_evaluation}" id="name" type="text" name="name"
									class="form-control" placeholder="Introduce el identificador*" required="required"
									data-error="Campo requerido." th:if="${prospectFound !=null }"th:value="${prospectFound.id}">
								<select class="form-select" th:field="*{status}">
									<option value="AUTORIZADO">
										Autorizar
									</option>
									<option value="RECHAZADO">
										Rechazar
									</option>
								</select>
							</div>
							<div class="col-sm">
								<div class="form-group"> <label for="name">Nombre *</label>
									<input th:field="*{name}" id="name" type="text" name="name" class="form-control"
										placeholder="Introduce el nombre*" required="required"
										data-error="Campo requerido." th:if="${prospectFound !=null }"th:value="${prospectFound.name}" >
								</div>
							</div>
							<div class="col-sm">
								<div class="form-group"> <label for="first_lastname">Apellido paterno
										*</label>
									<input th:filed="*{first_lastname}" id="first_lastname" type="text"
										name="first_lastname" class="form-control"
										placeholder="Introduce el apellido paterno *" required="required"
										data-error="Campo requerido." th:if="${prospectFound !=null }"th:value="${prospectFound.lastname}">
								</div>
							</div>
							<div class="col-sm">
								<div class="form-group"> <label for="second_lastname">Apellido paterno
										*</label>
									<input th:filed="*{second_lastname}" id="second_lastname" type="text"
										name="second_lastname" class="form-control"
										placeholder="Introduce el apellido materno *" required="required"
										data-error="Campo requerido." th:if="${prospectFound !=null }"th:value="${prospectFound.surname}">
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-sm">
								<div class="form-group"> <label for="address_number">Número*</label>
									<input th:filed="*{address_number}" id="address_number" type="text"
										name="address_number" class="form-control"
										placeholder="Introduce el numero de calle *" required="required"
										data-error="Número de calle requerido." th:if="${prospectFound !=null }"th:value="${prospectFound.addressnumber}">
								</div>
							</div>
							<div class="col-sm">
								<div class="form-group"> <label for="address">Calle*</label>
									<input th:filed="*{address}" id="address" type="text" name="address"
										class="form-control" placeholder="Introcuce el domicilio *" required="required"
										data-error="Domicilio requerido." th:if="${prospectFound !=null }"th:value="${prospectFound.address}">
								</div>
							</div>
							<div class="col-sm">
								<div class="form-group"> <label for="colonia">Colonia*</label>
									<input th:filed="*{colonia}" id="colonia" type="text" name="colonia"
										class="form-control" placeholder="Introcuce la colonia*" required="required"
										data-error="Colonia requerido." th:if="${prospectFound !=null }"th:value="${prospectFound.colonia}">
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-sm">
								<div class="form-group"> <label for="postal_code">Código postal*</label>
									<input th:filed="*{postal_code}" id="postal_code" type="text" name="postal_code"
										class="form-control" placeholder="Código postal*" required="required"
										data-error="Código postal requerido." th:if="${prospectFound !=null }"th:value="${prospectFound.postalCode}">
								</div>
							</div>
							<div class="col-sm">
								<div class="form-group">
									<label for="contact">Número de telefono*</label>
									<input th:filed="*{contact}" onblur="validaTelNumber(this)" id="contact" type="text"
										name="contact" class="form-control" placeholder="Número de teléfono*"
										required="required" data-error="Número de telefono requerido." th:if="${prospectFound !=null }"th:value="${prospectFound.contac}">
								</div>
								<span id="tel_error" name="tel_error" style="color: red;"></span>
							</div>
							<div class="col-sm">
								<div class="form-group"> <label for="rfc">RFC*</label>
									<input th:filed="*{rfc}" id="rfc" type="text" name="rfc" class="form-control"
										placeholder="RFC*" required="required" data-error="RFC requerido." th:if="${prospectFound !=null }"th:value="${prospectFound.rfc}">
								</div>
							</div>
						</div>
						<div lass="form-group"> <label for="observations">Observaciones</label>
							<textarea class="form-control" id="observations" th:field="*{observations}" rows="3" 
								required th:if="${prospectFound !=null }"th:value="${prospectFound.observations}"></textarea>
						</div>
						<div class="row">
							<div class="col-md-12 text-center" style="width: 100%;margin-top: 15px;">
								<button type="submit" class="btn btn-primary btn-send pt-2 btn-block ">
									<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
										class="bi bi-check" viewBox="0 0 16 16">
										<path
											d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z" />
									</svg>&nbsp; &nbsp;Registrar
								</button>

								<button class="btn btn-danger btn-send pt-2 btn-block " text="Cancelar"
									onclick="getBack()">
									<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
										class="bi bi-trash" viewBox="0 0 16 16">
										<path
											d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z" />
										<path fill-rule="evenodd"
											d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z" />
									</svg> &nbsp; &nbsp; Cancelar</button>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div> <!-- /.8 -->
	</div> <!-- /.row-->
	</div>
	</div>
	<script th:src="@{/js/bootstrap.bundle.min.js}"></script>
	<script th:src="@{/js/sweetalert.min.js}"></script>
	<script th:src="@{/js/jquery.min.js}"></script>
	<script>
		function validaTelNumber(target) {
			document.querySelector("#tel_error").innerHTML = ""
			if (target.value.length < 10 || !target.value.match(/^\d{10}$/)) {
				document.querySelector("#tel_error").innerHTML = "Número no válido"
			}
		}
		function getBack() {
			swal({
				title: "¿Estas seguro de querer terminar el proceso?",
				text: "Los datos introducidos no serán guardados",
				icon: "warning",
				buttons: true,
				dangerMode: true,
			})
				.then((ok) => {
					if (ok) {
						window.location.href = "[[@{/menu}]]"
					}
				});

		}
		$(".custom-file-input").on("change", function () {
			var files = Array.from(this.files)
			var fileName = files.map(f => {return f.name}).join(", ")
			$(this).siblings(".custom-file-label").addClass("selected").html(fileName);
		});
	</script>
</body>

</html>